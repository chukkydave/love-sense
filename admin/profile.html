<!DOCTYPE html>
<html lang="en">


<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
  <title>Love Sense - Admin</title>
  <!-- General CSS Files -->
  <link rel="stylesheet" href="assets/css/app.min.css">
  <link rel="stylesheet" href="assets/bundles/bootstrap-social/bootstrap-social.css">
  <link rel="stylesheet" href="assets/bundles/summernote/summernote-bs4.css">
  <!-- Template CSS -->
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/components.css">
  <!-- Custom style CSS -->
  <link rel="stylesheet" href="assets/css/custom.css">
  <link rel='shortcut icon' type='image/x-icon' href='assets/img/favicon.ico' />
  <style>
    #breathing-button {
      /* width: 180px;
      padding: 10px;
      margin: 50px auto;
      border: 1px solid #3cc8b4; */
      -webkit-animation: breathing 2s ease-out infinite normal;
      animation: breathing 2s ease-out infinite normal;
      /* font-family:'Lantinghei SC';
      font-size: 16px;
      font-weight: bold;
      background: #3cc8b4;
      color: #fff; */
      -webkit-font-smoothing: antialiased;
      /* border-radius: 2px;
      text-align: center;     */
      position: fixed;
      bottom: 0;
      z-index: 999;
      right: 0;
      margin-bottom: 2em;
      margin-right: 10px;
      background-color: red;
      border-color: red;
      color: white;
      /* display: none; */
    }


    @-webkit-keyframes breathing {
      0% {
        -webkit-transform: scale(0.9);
        transform: scale(0.9);
      }

      25% {
        -webkit-transform: scale(1);
        transform: scale(1);
      }

      60% {
        -webkit-transform: scale(0.9);
        transform: scale(0.9);
      }

      100% {
        -webkit-transform: scale(0.9);
        transform: scale(0.9);
      }
    }

    @keyframes breathing {
      0% {
        -webkit-transform: scale(0.9);
        -ms-transform: scale(0.9);
        transform: scale(0.9);
      }

      25% {
        -webkit-transform: scale(1);
        -ms-transform: scale(1);
        transform: scale(1);
      }

      60% {
        -webkit-transform: scale(0.9);
        -ms-transform: scale(0.9);
        transform: scale(0.9);
      }

      100% {
        -webkit-transform: scale(0.9);
        -ms-transform: scale(0.9);
        transform: scale(0.9);
      }
    }
  </style>
</head>

<body>
  <button class="btn" id="breathing-button">Enable
    Notification</button>
  <div class="loader"></div>
  <div id="app">
    <div class="main-wrapper main-wrapper-1">
      <div class="navbar-bg"></div>
      <nav class="navbar navbar-expand-lg main-navbar sticky">
        <div class="form-inline mr-auto">
          <ul class="navbar-nav mr-3">
            <li><a href="#" data-toggle="sidebar" class="nav-link nav-link-lg
      									collapse-btn"> <i data-feather="menu"></i></a></li>

          </ul>
        </div>
        <ul class="navbar-nav navbar-right">
          <li><a href="#" class="nav-link nav-link-lg fullscreen-btn">
              <i data-feather="maximize"></i>
            </a></li>
          <li class="dropdown dropdown-list-toggle"><a href="#" data-toggle="dropdown"
              class="nav-link nav-link-lg message-toggle"><i data-feather="bell" id="notification_icon" class=""></i>
              <span class="badge headerBadge1" style="background: red; display: none;" id="notification_count"></span>
            </a>
            <div class="dropdown-menu dropdown-list dropdown-menu-right pullDown">
              <div class="dropdown-header">
                Notifications
                <!-- <div class="float-right">
                              <a href="#">Mark All As Read</a>
                            </div> -->
              </div>
              <div class="dropdown-list-content dropdown-list-message" id="notification_body">
                <div class="dropdown-header">
                  No Notifications

                </div>
              </div>
              <!-- <div class="dropdown-footer text-center">
                            <a href="#">View All <i class="fas fa-chevron-right"></i></a>
                          </div> -->
            </div>
          </li>


          <li class="dropdown"><a href="#" data-toggle="dropdown"
              class="nav-link dropdown-toggle nav-link-lg nav-link-user">
              <img alt="image" src="assets/img/user.png" class="user-img-radious-style"> <span
                class="d-sm-none d-lg-inline-block"></span></a>
            <div class="dropdown-menu dropdown-menu-right pullDown">
              <div class="dropdown-title">Hello <span id="namey1"></span></div>
              <a href="profile.html" class="dropdown-item has-icon"> <i class="far
      										fa-user"></i> Profile
              </a>
              <div class="dropdown-divider"></div>
              <a id="logMeOut" class="dropdown-item has-icon text-danger"> <i class="fas fa-sign-out-alt"></i>
                Logout
              </a>
            </div>
          </li>
        </ul>
      </nav>
      <div class="main-sidebar sidebar-style-2">
        <aside id="sidebar-wrapper">
          <div class="sidebar-brand">
            <a href="index.html"> <img alt="image" src="assets/img/logo.png" class="header-logo" /> <span
                class="logo-name">Love-Sense</span>
            </a>
          </div>
          <div class="sidebar-user">
            <div class="sidebar-user-picture">
              <img alt="image" src="assets/img/user.png">
            </div>
            <div class="sidebar-user-details">
              <div class="user-name" id="user-name1"></div>
              <div class="user-role">Administrator</div>
              <div class="sidebar-userpic-btn">

              </div>
            </div>
          </div>
          <ul class="sidebar-menu">
            <!-- <li class="menu-header">Main</li> -->
            <li class="dropdown">
              <a href="dashboard.html" class="nav-link"><i data-feather="monitor"></i><span>Dashboard</span></a>
            </li>
            <li class="dropdown">
              <a class="nav-link" href="contacts.html"><i data-feather="message-square"></i><span>Contacts</span></a>
            </li>
            <li class="dropdown">
              <a class="nav-link" href="appointments.html"><i data-feather="clock"></i><span>Appointments</span></a>
            </li>

            <li class="dropdown">
              <a href="#" class="menu-toggle nav-link has-dropdown"><i
                  data-feather="settings"></i><span>Settings</span></a>
              <ul class="dropdown-menu" style="display: none;">
                <li><a href="settings-admins.html">Admins</a></li>
              </ul>
            </li>

          </ul>
        </aside>
      </div>
      <!-- Main Content -->
      <div class="main-content">
        <section class="section">
          <ul class="breadcrumb breadcrumb-style ">
            <li class="breadcrumb-item">
              <h4 class="page-title m-b-0">Profile</h4>
            </li>
            <li class="breadcrumb-item">
              <a href="index.html">
                <i data-feather="home"></i></a>
            </li>
            <li class="breadcrumb-item">Profile</li>
          </ul>
          <div class="section-body">
            <div class="row mt-sm-4">
              <!-- <div class="col-12 col-md-12 col-lg-4">
                <div class="card author-box">
                  <div class="card-body">
                    <div class="author-box-center">
                      <img alt="image" src="assets/img/users/user-1.png" class="rounded-circle author-box-picture">
                      <div class="clearfix"></div>
                      <div class="author-box-name">
                        <a href="#">Sarah Smith</a>
                      </div>
                      <div class="author-box-job">Web Developer</div>
                    </div>
                    <div class="text-center">
                      <div class="author-box-description">
                        <p>
                          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur voluptatum alias molestias
                          minus quod dignissimos.
                        </p>
                      </div>
                      <div class="mb-2 mt-3">
                        <div class="text-small font-weight-bold">Follow Hasan On</div>
                      </div>
                      <a href="#" class="btn btn-social-icon mr-1 btn-facebook">
                        <i class="fab fa-facebook-f"></i>
                      </a>
                      <a href="#" class="btn btn-social-icon mr-1 btn-twitter">
                        <i class="fab fa-twitter"></i>
                      </a>
                      <a href="#" class="btn btn-social-icon mr-1 btn-github">
                        <i class="fab fa-github"></i>
                      </a>
                      <a href="#" class="btn btn-social-icon mr-1 btn-instagram">
                        <i class="fab fa-instagram"></i>
                      </a>
                      <div class="w-100 d-sm-none"></div>
                    </div>
                  </div>
                </div>
                <div class="card">
                  <div class="card-header">
                    <h4>Personal Details</h4>
                  </div>
                  <div class="card-body">
                    <div class="py-4">
                      <p class="clearfix">
                        <span class="float-left">
                          Birthday
                        </span>
                        <span class="float-right text-muted">
                          30-05-1998
                        </span>
                      </p>
                      <p class="clearfix">
                        <span class="float-left">
                          Phone
                        </span>
                        <span class="float-right text-muted">
                          (0123)123456789
                        </span>
                      </p>
                      <p class="clearfix">
                        <span class="float-left">
                          Mail
                        </span>
                        <span class="float-right text-muted">
                          test@example.com
                        </span>
                      </p>
                      <p class="clearfix">
                        <span class="float-left">
                          Facebook
                        </span>
                        <span class="float-right text-muted">
                          <a href="#">John Deo</a>
                        </span>
                      </p>
                      <p class="clearfix">
                        <span class="float-left">
                          Twitter
                        </span>
                        <span class="float-right text-muted">
                          <a href="#">@johndeo</a>
                        </span>
                      </p>
                    </div>
                  </div>
                </div>
                <div class="card">
                  <div class="card-header">
                    <h4>Skills</h4>
                  </div>
                  <div class="card-body">
                    <ul class="list-unstyled user-progress list-unstyled-border list-unstyled-noborder">
                      <li class="media">
                        <div class="media-body">
                          <div class="media-title">Java</div>
                        </div>
                        <div class="media-progressbar p-t-10">
                          <div class="progress" data-height="6">
                            <div class="progress-bar bg-primary" data-width="70%"></div>
                          </div>
                        </div>
                      </li>
                      <li class="media">
                        <div class="media-body">
                          <div class="media-title">Web Design</div>
                        </div>
                        <div class="media-progressbar p-t-10">
                          <div class="progress" data-height="6">
                            <div class="progress-bar bg-warning" data-width="80%"></div>
                          </div>
                        </div>
                      </li>
                      <li class="media">
                        <div class="media-body">
                          <div class="media-title">Photoshop</div>
                        </div>
                        <div class="media-progressbar p-t-10">
                          <div class="progress" data-height="6">
                            <div class="progress-bar bg-green" data-width="48%"></div>
                          </div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div> -->
              <div class="col-12 col-md-12 col-lg-12">
                <div class="card">
                  <div class="padding-20">
                    <ul class="nav nav-tabs" id="myTab2" role="tablist">
                      <li class="nav-item">
                        <a class="nav-link active" id="home-tab2" data-toggle="tab" href="#about" role="tab"
                          aria-selected="true">About</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" id="profile-tab2" data-toggle="tab" href="#settings" role="tab"
                          aria-selected="false">Setting</a>
                      </li>
                    </ul>
                    <div class="tab-content tab-bordered" id="myTab3Content">
                      <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="home-tab2">
                        <div class="row">
                          <div class="col-md-3 col-6 b-r">
                            <strong>Full Name</strong>
                            <br>
                            <p class="text-muted" id="myName"></p>
                          </div>
                          <!-- <div class="col-md-3 col-6 b-r">
                            <strong>Mobile</strong>
                            <br>
                            <p class="text-muted">(123) 456 7890</p>
                          </div> -->
                          <div class="col-md-3 col-6 b-r">
                            <strong>Email</strong>
                            <br>
                            <p class="text-muted" id="myEmail"></p>
                          </div>

                        </div>



                      </div>
                      <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="profile-tab2">
                        <div>
                          <div class="card-header">
                            <h4>Change Password</h4>
                          </div>
                          <div class="card-body">
                            <div class="row">
                              <div class="form-group col-md-4 col-12">
                                <label>Old Password</label>
                                <input type="password" id="oldPw" class="form-control required_f" value="">

                              </div>
                              <div class="form-group col-md-4 col-12">
                                <label>New-Password</label>
                                <input type="password" class="form-control required_f" id="newPw" value="">

                              </div>
                              <!-- <div class="form-group col-md-4 col-12">
                                <label>Phone</label>
                                <input type="tel" class="form-control" value="">
                              </div> -->

                            </div>


                          </div>
                          <div class="card-footer text-right">
                            <i id="change_pw_modal" style="display: none;" class="fa fa-3x fa-spin fa-spinner"></i>
                            <button class="btn btn-primary" id="changePw">Save Changes</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

      </div>
      <footer class="main-footer">
        <div class="footer-left">
          2020 <div class="bullet"></div> Design By <a href="#">PoeInternational</a>
        </div>
        <div class="footer-right">
        </div>
      </footer>
    </div>
  </div>
  <!-- General JS Scripts -->
  <script src="assets/js/app.min.js"></script>
  <!-- JS Libraies -->
  <script src="assets/bundles/summernote/summernote-bs4.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"
    integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ=="
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <!-- Page Specific JS File -->
  <!-- Template JS File -->
  <script src="assets/js/scripts.js"></script>
  <!-- Custom JS File -->
  <script src="assets/js/custom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.js"></script>
  <script src="../general.js"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      checkLoggedin();
      $("#changePw").on("click", function () {
        if (isEmptyInput('.required_f')) {
          changePassword();
        }
      })
    })
    function checkLoggedin() {
      if (localStorage.getItem('token') === null) {
        var url = myHome;
        window.location.replace(url);
      }
    }

    let profileName = localStorage.getItem('user_name');
    let profileEmail = localStorage.getItem('user_email');

    $('#myName').html(profileName);
    $('#myEmail').html(profileEmail);

    function isEmptyInput(first) {
      let isEmpty = false;
      $(first).each(function () {
        var input = $.trim($(this).val());
        if (input.length === 0 || input === "0") {
          $(this).addClass('has-error');
          isEmpty = true;

        } else {
          $(this).removeClass("has-error");

        }

      });
      if (isEmpty === true) { return false; }
      else { return true }

    }

    function changePassword() {
      $('#changePw').hide()
      $('#change_pw_modal').show()
      //declaring variable using the ES6 let
      let oldPw = $('#oldPw').val();
      let newPw = $('#newPw').val();


      // using the ES6 const variable to hold the url to the api path
      const URL = `${apiPaths}user/change-password`;
      //storing the variable in a data variable to be an object as Displayed in the PAYLOAD


      let data = {
        "password": oldPw,
        "new_password": newPw,
      }
      console.log(data)

      var token1 = localStorage.getItem('token')

      //using AJAX to make the submit call
      $.ajax({
        type: 'PATCH',
        dataType: 'json',
        cache: false,
        url: URL,
        headers: {
          // 'Accept': 'application/json',
          'Content-Type': 'application/json',
          'Authorization': token1
        },
        data: JSON.stringify(data),
        success: (res) => {
          // alert(res.status)
          if (res.status == 201 || res.status == 200) {
            alert("Succesful");
            $('#change_pw_modal').hide()
            $('#changePw').show()
            window.location.reload;

          }
          else {
            alert('Error!!');
            $('#change_pw_modal').hide()
            $('#changePw').show()

          }


        },
        error: (res) => {

          alert(res.responseText);
          $('#change_pw_modal').hide()
          $('#changePw').show()
        }


      })
    }
  </script>

</body>


</html>